<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Learning To Rank Library: Tutorial page 5 - Learners, Scorers, Measures</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Learning To Rank Library
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial page 5 - Learners, Scorers, Measures </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#TutorialMLS">Measures, Learners, Scorers</a><ul><li class="level2"><a href="#TutorialMLSMeasures">Measures</a><ul><li class="level3"><a href="#TutorialMLSMeasuresClassify">Classification problem</a></li>
<li class="level3"><a href="#TutorialMLSMeasuresRegression">Regression problem</a></li>
<li class="level3"><a href="#TutorialMLSMeasureRanking">Ranking problem</a></li>
</ul>
</li>
<li class="level2"><a href="#TutorialLearnerScorer">Learners and scorers</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h2><a class="anchor" id="TutorialMLS"></a>
Measures, Learners, Scorers</h2>
<p>Suppose you are given set of objects and set of possible replies for this objects. You have to find function between objects and replies. Also you are given a set of (object, answer), where object is from object's set and answer is from set of replies. Set of such pairs called training data. You may assume that there is another set of objects called testing data. <a class="el" href="class_the.html">The</a> machine learning problem is to predict answers for objects from testing data, using training data.</p>
<p>There are three basic parts which we have to know to continue our tutorial.</p>
<ul>
<li><a class="el" href="classltr_1_1_measure.html">Measure</a>. <a class="el" href="classltr_1_1_measure.html">Measure</a> is something like quality indicator. </li>
<li><a class="el" href="classltr_1_1_learner.html" title="Learns input dataset and produces a Scorer.">Learner</a>. <a class="el" href="classltr_1_1_learner.html" title="Learns input dataset and produces a Scorer.">Learner</a> is the main part and it process the data. </li>
<li><a class="el" href="classltr_1_1_scorer.html">Scorer</a>. You may assume that scorer is a function (object -&gt; real value).</li>
</ul>
<h3><a class="anchor" id="TutorialMLSMeasures"></a>
Measures</h3>
<p>Let's try to explain what is the measure. <a class="el" href="classltr_1_1_measure.html">Measure</a> is function which helps us to estimate quality of our predictions for testing data.</p>
<p>All available measures in LTR can be divided into three groups. Measures for classification problems, measures for regression problems and measures for ranking problems. Look below to see examples of measures for different problems' types.</p>
<h4><a class="anchor" id="TutorialMLSMeasuresClassify"></a>
Classification problem</h4>
<p>Consider the situation when we have set {0, 1} as a set of possible replies. We know classes for objects from some dataset. Suppose we develop algorithm which predict classes for object from this dataset. And our algorithm sometimes mismatch with real answers. Then the rate of mismatches can be a function which estimate quality of our algorithm. In this case the rate of mismatches is the measure. If rate equals to 0, then our algorithm is perfect.</p>
<h4><a class="anchor" id="TutorialMLSMeasuresRegression"></a>
Regression problem</h4>
<p>Consider the situation when we have set of all real numbers as a set of possible replies. Then we obtain regression problem. Our algorithm have to predict real value for every object from testing data. How we can estimate quality of algorithm in such case? One of well known ways is using squared error. Let real results for objects are x<sub>1</sub>, x<sub>2</sub>, ..., x<sub>n</sub>, and results of our algorithm are y<sub>1</sub>, y<sub>2</sub>, ..., y<sub>n</sub>. Then quality of algorithm can be evaluated using following formula: </p>
<p class="formulaDsp">
\[quality = \sum\limits_{i=1}^n\left(\left(x_i-y_i\right)^2\right)\]
</p>
<p> <a class="el" href="class_the.html">The</a> smaller this sum is the better.</p>
<h4><a class="anchor" id="TutorialMLSMeasureRanking"></a>
Ranking problem</h4>
<p>This case is much more complicated than two previous. Usually we use DCG, normalized DCG measures and others here.</p>
<h3><a class="anchor" id="TutorialLearnerScorer"></a>
Learners and scorers</h3>
<p><a class="el" href="classltr_1_1_learner.html" title="Learns input dataset and produces a Scorer.">Learner</a> is a program which process the training data. If it is necessary learner gets measure as the input parameter. Usually learner trying to optimize measure according to the given problem. After learning learner outputs a scorer. <a class="el" href="classltr_1_1_scorer.html">Scorer</a> is a function which associates real value with object. Then we get real values as a parameter of every object. This parameters are very useful. Let's describe some problems which can be solved using this information.</p>
<ul>
<li>Classification problem. </li>
<li>Regression problem. </li>
<li>Ranking problem. We need to sort available objects by score and we will get an order.</li>
</ul>
<p>How it works you can see at the example below.</p>
<table  class="example">
<tr>
<td>Example: operating with learners and scorers. Regression problem. </td></tr>
<tr>
<td><div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;vector&gt;</span>

<span class="preprocessor">#include &quot;ltr\data\data_set.h&quot;</span>
<span class="preprocessor">#include &quot;ltr\data\object.h&quot;</span>
<span class="preprocessor">#include &quot;ltr\learners\linear_learner\linear_learner.h&quot;</span>
<span class="preprocessor">#include &quot;ltr\scorers\linear_scorer.h&quot;</span>

<span class="keyword">using</span> std::cout;
<span class="keyword">using</span> std::vector;
<span class="keyword">using</span> std::endl;

<span class="keyword">using</span> <a class="code" href="classltr_1_1_data_set.html">ltr::DataSet</a>;
<span class="keyword">using</span> <a class="code" href="classltr_1_1_object.html">ltr::Object</a>;

<span class="keywordtype">int</span> <a class="code" href="generator_8cc.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>() {
  ltr::Log log;

  DataSet&lt;Object&gt; data;
  Object train_object1, train_object2, train_object3;

  train_object1 &lt;&lt; 1.2 &lt;&lt; 12.9;                                                 <span class="comment">// create new object from training data</span>
  train_object1.set_actual_label(1);                                            <span class="comment">// set new actual label</span>
  train_object2 &lt;&lt; 2.4 &lt;&lt; 25.8; 
  train_object2.set_actual_label(2);
  train_object3 &lt;&lt; 0.3 &lt;&lt; 3.225;
  train_object3.set_actual_label(0.25);
  data.add(train_object1);                                                      <span class="comment">// add objects to training DataSet</span>
  data.add(train_object2);
  data.add(train_object3);

  <a class="code" href="classltr_1_1_linear_learner.html">ltr::LinearLearner&lt;Object&gt;</a> learner;                                           <span class="comment">// create linear learner</span>
  learner.<a class="code" href="classltr_1_1_base_learner.html#aded87586e62aff293f7365f59fda237d" title="Learns input dataset.">learn</a>(data);                                                          <span class="comment">// learning process</span>

  <a class="code" href="classltr_1_1utility_1_1shared__ptr.html">ltr::LinearScorer::Ptr</a> scorer = learner.<a class="code" href="classltr_1_1_base_learner.html#a59d97bb35c49fc80bf97afe317bd7a44">makeSpecific</a>();                       <span class="comment">// scorer based on the learner</span>

  cout &lt;&lt; <span class="stringliteral">&quot;train_object1 score = &quot;</span> &lt;&lt; scorer-&gt;score(train_object1) &lt;&lt; endl;     <span class="comment">// output scores for objects from training data</span>
  cout &lt;&lt; <span class="stringliteral">&quot;train_object2 score = &quot;</span> &lt;&lt; scorer-&gt;score(train_object2) &lt;&lt; endl;
  cout &lt;&lt; <span class="stringliteral">&quot;train_object3 score = &quot;</span> &lt;&lt; scorer-&gt;score(train_object3) &lt;&lt; endl;

  Object test_object1;
  test_object1 &lt;&lt; 12 &lt;&lt; 129;                                                    <span class="comment">// create object from testing data</span>

  cout &lt;&lt; <span class="stringliteral">&quot;test_object1 score = &quot;</span> &lt;&lt; scorer-&gt;score(test_object1) &lt;&lt; endl;       <span class="comment">// output score for object from testing data</span>

  <span class="keywordflow">return</span> 0;
}
</pre></div>  </td></tr>
<tr>
<td>Output: </td></tr>
<tr>
<td><div class="fragment"><pre class="fragment"></pre></div>  </td></tr>
</table>
<p>LTR supports different types of learners. Some of this types are linear learner, linear composition learner, decision tree learner. Each learner from LTR has its own scorer.</p>
<p>Let's look at another example. Here we download data from file.</p>
<table  class="example">
<tr>
<td>Example: operating with learners and scorers. </td></tr>
<tr>
<td><div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="preprocessor">#include &quot;<a class="code" href="io__utility_8h.html">ltr/data/utility/io_utility.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="gp__learner_8h.html">ltr/learners/gp_learner/gp_learner.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="dcg_8h.html">ltr/measures/dcg.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="gp__scorer_8h.html">ltr/scorers/gp_scorer.h</a>&quot;</span>

<span class="keyword">using</span> <a class="code" href="classltr_1_1_data_set.html">ltr::DataSet</a>;
<span class="keyword">using</span> <a class="code" href="namespaceltr_1_1io__utility.html#a30640be8338829068b02b93a14769bb2">ltr::io_utility::loadDataSet</a>;
<span class="keyword">using</span> <a class="code" href="namespaceltr_1_1io__utility.html#a88a9b672e2c7c15a13a0d20f59866426">ltr::io_utility::saveDataSet</a>;

<span class="keywordtype">int</span> <a class="code" href="generator_8cc.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>() {
  <a class="code" href="classltr_1_1utility_1_1shared__ptr.html">ltr::Measure&lt;ltr::ObjectList&gt;::Ptr</a> dcg_measure(<span class="keyword">new</span> <a class="code" href="classltr_1_1_base_d_c_g.html">ltr::DCG</a>());
  <a class="code" href="classltr_1_1gp_1_1_g_p_learner.html" title="GPLearner Implements genetic programming approach applied to learning to rank.">ltr::gp::GPLearner&lt;ltr::ObjectList&gt;</a> gp_learner(dcg_measure);

  DataSet&lt;ltr::ObjectList&gt; training_data =
    loadDataSet&lt;ltr::ObjectList&gt;(<span class="stringliteral">&quot;training_data.txt&quot;</span>, <span class="stringliteral">&quot;YANDEX&quot;</span>);
  DataSet&lt;ltr::ObjectList&gt; testing_data =
    loadDataSet&lt;ltr::ObjectList&gt;(<span class="stringliteral">&quot;testing_data.txt&quot;</span>, <span class="stringliteral">&quot;YANDEX&quot;</span>);
  
  gp_learner.learn(training_data);

  gp_learner.make()-&gt;predict(testing_data);

  <a class="code" href="namespaceltr_1_1io__utility.html#a88a9b672e2c7c15a13a0d20f59866426">saveDataSet</a>(testing_data, <span class="stringliteral">&quot;result_data.txt&quot;</span>, <span class="stringliteral">&quot;YANDEX&quot;</span>);
}
</pre></div>  </td></tr>
</table>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 4 2012 23:04:59 for Learning To Rank Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
