<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Learning To Rank Library: RandomLib::ExactNormal&lt; bits &gt; Class Template Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Learning To Rank Library
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>About</span></a></li>
      <li><a href="_doc_contents.html"><span>Documentation</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>RandomLib</b>      </li>
      <li class="navelem"><a class="el" href="class_random_lib_1_1_exact_normal.html">ExactNormal</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">RandomLib::ExactNormal&lt; bits &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Sample exactly from a normal distribution.  
 <a href="class_random_lib_1_1_exact_normal.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_exact_normal_8hpp_source.html">ExactNormal.hpp</a>&gt;</code></p>

<p><a href="class_random_lib_1_1_exact_normal-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a41d3d7058bda37b72366ac8330136ad3"><td class="memTemplParams" colspan="2">template&lt;class Random &gt; </td></tr>
<tr class="memitem:a41d3d7058bda37b72366ac8330136ad3"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="class_random_lib_1_1_random_number.html">RandomNumber</a>&lt; bits &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_random_lib_1_1_exact_normal.html#a41d3d7058bda37b72366ac8330136ad3">operator()</a> (<a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;r) const </td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa0d29f59d5343ab8467252903a615548"><td class="memTemplParams" colspan="2">template&lt;class Random &gt; </td></tr>
<tr class="memitem:aa0d29f59d5343ab8467252903a615548"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_random_lib_1_1_exact_normal.html#aa0d29f59d5343ab8467252903a615548">ExpProbH</a> (<a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;r) const </td></tr>
<tr class="memitem:aa9406b2d46a9862e3070e777bad5608b"><td class="memTemplParams" colspan="2">template&lt;class Random &gt; </td></tr>
<tr class="memitem:aa9406b2d46a9862e3070e777bad5608b"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_random_lib_1_1_exact_normal.html#aa9406b2d46a9862e3070e777bad5608b">ExpProb</a> (<a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;r, unsigned n) const </td></tr>
<tr class="memitem:ae18d363792f71fee6526c51f99f24430"><td class="memTemplParams" colspan="2">template&lt;class Random &gt; </td></tr>
<tr class="memitem:ae18d363792f71fee6526c51f99f24430"><td class="memTemplItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_random_lib_1_1_exact_normal.html#ae18d363792f71fee6526c51f99f24430">ExpProbN</a> (<a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;r) const </td></tr>
<tr><td colspan="2"><h2><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a5a1758f9cbe26c7bb29d3f5168060fe0"><td class="memTemplParams" colspan="2">template&lt;class Random &gt; </td></tr>
<tr class="memitem:a5a1758f9cbe26c7bb29d3f5168060fe0"><td class="memTemplItemLeft" align="right" valign="top">static bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_random_lib_1_1_exact_normal.html#a5a1758f9cbe26c7bb29d3f5168060fe0">Boolean</a> (<a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;r)</td></tr>
<tr class="memitem:a8cd3cd60140009d90017d25c7ac10741"><td class="memTemplParams" colspan="2">template&lt;class Random &gt; </td></tr>
<tr class="memitem:a8cd3cd60140009d90017d25c7ac10741"><td class="memTemplItemLeft" align="right" valign="top">static int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_random_lib_1_1_exact_normal.html#a8cd3cd60140009d90017d25c7ac10741">Choose</a> (<a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;r, int <a class="el" href="tk__fold__simple__splitter__unittest_8cc.html#aeac95f79b72f13ef3244522682ba9a21">k</a>)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a129d9ff3cd3a2d3f6185940a9775096d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_random_lib_1_1_random_number.html">RandomNumber</a>&lt; bits &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_random_lib_1_1_exact_normal.html#a129d9ff3cd3a2d3f6185940a9775096d">_x</a></td></tr>
<tr class="memitem:a90676ae87589bdbd0e1677facb493e4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_random_lib_1_1_random_number.html">RandomNumber</a>&lt; bits &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_random_lib_1_1_exact_normal.html#a90676ae87589bdbd0e1677facb493e4f">_p</a></td></tr>
<tr class="memitem:aa4a41f853db3d9399090c01f97a49bb7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_random_lib_1_1_random_number.html">RandomNumber</a>&lt; bits &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_random_lib_1_1_exact_normal.html#aa4a41f853db3d9399090c01f97a49bb7">_q</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;int bits = 1&gt;<br/>
class RandomLib::ExactNormal&lt; bits &gt;</h3>

<p>Sample exactly from a normal distribution. </p>
<p>Sample <em>x</em> from exp(<em>x</em><sup>2</sup>/2) / sqrt(2). For background, see:</p>
<ul>
<li>J. von Neumann, Various Techniques used in Connection with Random Digits, J. Res. Nat. Bur. Stand., Appl. Math. Ser. 12, 36--38 (1951), reprinted in Collected Works, Vol. 5, 768--770 (Pergammon, 1963).</li>
<li>D. E. Knuth and A. C. Yao, The Complexity of Nonuniform Random Number Generation, in "Algorithms and Complexity" (Academic Press, 1976), pp. 357--428.</li>
<li>P. Flajolet and N. Saheb, The Complexity of Generating an Exponentially Distributed Variate, J. Algorithms 7, 463--488 (1986).</li>
</ul>
<p>The algorithm is as follows:</p>
<ol type="1">
<li>Select an integer <em>k</em>  0 with probability exp(<em>k</em>/2) (1exp(1/2)).</li>
<li>Accept with probability exp( <em>k</em> (<em>k</em>  1) / 2); otherwise, reject and start over at step 1.</li>
<li>Sample a random number <em>x</em> uniformly from [0,1).</li>
<li>Accept with probability exp( <em>x</em> (<em>x</em> + 2<em>k</em>) / 2); otherwise, reject and start over at step 1.</li>
<li>Set <em>x</em> = <em>k</em> + <em>x</em>.</li>
<li>With probability 1/2, negate <em>x</em>.</li>
<li>Return <em>x</em>.</li>
</ol>
<p>It is easy to show that this algorithm returns samples from the normal distribution with zero mean and unit variance. Futhermore, all these steps can be carried out exactly as follows:</p>
<ul>
<li>Step 1:<ul>
<li><em>k</em> = 0;</li>
<li>while (ExpProb(1/2)) increment <em>k</em> by 1.</li>
</ul>
</li>
<li>Step 2:<ul>
<li><em>n</em> = <em>k</em> (<em>k</em>  1) / 2;</li>
<li>while (<em>n</em> &gt; 0) { if (!ExpProb(1/2)) go to step 1; decrement <em>n</em> by 1; }</li>
</ul>
</li>
<li>Step 4:<ul>
<li>repeat <em>k</em> + 1 times: if (!ExpProb( <em>x</em> (<em>x</em> + 2<em>k</em>) / (2<em>k</em> + 2))) go to step 1.</li>
</ul>
</li>
</ul>
<p>Here, ExpProb(<em>p</em>) returns true with probability exp(<em>p</em>). With <em>p</em> = 1/2 (steps 1 and 2), this is implemented with von Neumann's rejection technique:</p>
<ul>
<li>Generate a sequence of random numbers <em>U</em><sub><em>i</em></sub> and find the greatest <em>n</em> such that 1/2 &gt; <em>U</em><sub>1</sub> &gt; <em>U</em><sub>2</sub> &gt; . . . &gt; <em>U</em><sub><em>n</em></sub>. (The resulting value of <em>n</em> may be 0.)</li>
<li>If <em>n</em> is even, accept and return true; otherwise (<em>n</em> odd), reject and return false.</li>
</ul>
<p>For <em>p</em> = <em>x</em> (<em>x</em> + 2<em>k</em>) / (2<em>k</em> + 2) (step 4), we generalize von Neumann's procedure as follows:</p>
<ul>
<li>Generate two sequences of random numbers <em>U</em><sub><em>i</em></sub> and <em>V</em><sub><em>i</em></sub> and find the greatest <em>n</em> such that both the following conditions hold<ul>
<li><em>x</em> &gt; <em>U</em><sub>1</sub> &gt; <em>U</em><sub>2</sub> &gt; . . . &gt; <em>U</em><sub><em>n</em></sub>;</li>
<li><em>V</em><sub><em>i</em></sub> &lt; (<em>x</em> + 2 <em>k</em>) / (2 <em>k</em> + 2) for all <em>i</em> in [1, <em>n</em>].</li>
</ul>
(The resulting value of <em>n</em> may be 0.)</li>
<li>If <em>n</em> is even, accept (return true); otherwise (<em>n</em> odd), reject (return false).</li>
</ul>
<p>Here, instead of testing <em>V</em><sub><em>i</em></sub> &lt; (<em>x</em> + 2 <em>k</em>) / (2 <em>k</em> + 2), we carry out the following tests:</p>
<ul>
<li>return true, with probability 2 <em>k</em> / (2 <em>k</em> + 2);</li>
<li>return false, with probability 1 / (2 <em>k</em> + 2);</li>
<li>otherwise (also with probability 1 / (2 <em>k</em> + 2)), return <em>x</em> &gt; <em>V</em><sub><em>i</em></sub>.</li>
</ul>
<p>The resulting method now entails evaluation of simple fractional probabilities (e.g., 1 / (2 <em>k</em> + 2)), or comparing random numbers (e.g., <em>U</em><sub>1</sub> &gt; <em>U</em><sub>2</sub>). These may be carried out exactly with a finite mean running time.</p>
<p>With <em>bits</em> = 1, this consumes 30.1 digits on average and the result has 1.19 digits in the fraction. It takes about 676 ns to generate a result (1460 ns, including the time to round it to a double). With bits = 32, it takes 437 ns to generate a result (621 ns, including the time to round it to a double). In contrast, <a class="el" href="class_random_lib_1_1_normal_distribution.html" title="Normal deviates.">NormalDistribution</a> takes about 44 ns to generate a double result.</p>
<p>Another way of assessing the efficiency of the algorithm is thru the mean value of the balance = (number of random bits consumed)  (number of bits in the result). If we code the result in Knuth &amp; Yao's unary-binary notation, then the mean balance is 26.6.</p>
<p>For example the following samples from a normal exponential distribution and prints various representations of the result. </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">   #include &lt;RandomLib/RandomNumber.hpp&gt;</span>
<span class="preprocessor">   #include &lt;RandomLib/ExactNormal.hpp&gt;</span>

     <a class="code" href="class_random_lib_1_1_random_canonical.html" title="Generate random integers, reals, and booleans.">RandomLib::Random</a> r;
     <span class="keyword">const</span> <span class="keywordtype">int</span> bits = 1;
     <a class="code" href="class_random_lib_1_1_exact_normal.html" title="Sample exactly from a normal distribution.">RandomLib::ExactNormal&lt;bits&gt;</a> ndist;
     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 10; ++i) {
       <a class="code" href="class_random_lib_1_1_random_number.html" title="Infinite precision random numbers.">RandomLib::RandomNumber&lt;bits&gt;</a> x = ndist(r); <span class="comment">// Sample</span>
       std::pair&lt;double, double&gt; z = x.<a class="code" href="class_random_lib_1_1_random_number.html#a0801e21e273b52fc66074bc49fced7ec">Range</a>();
       std::cout &lt;&lt; x &lt;&lt; <span class="stringliteral">&quot; = &quot;</span>     <span class="comment">// Print in binary with ellipsis</span>
                 &lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; z.first &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; z.second &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>; <span class="comment">// Print range</span>
       <span class="keywordtype">double</span> v = x.<a class="code" href="class_random_lib_1_1_random_number.html#aa147a87dafe3925babb55d08b6061fa1">Value</a>&lt;<span class="keywordtype">double</span>&gt;(r); <span class="comment">// Round exactly to nearest double</span>
       std::cout &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
     }
</pre></div><p> Here's a possible result: </p>
<div class="fragment"><pre class="fragment">   -1.00... = (-1.25,-1) = -1.02142
   -0.... = (-1,0) = -0.319708
   0.... = (0,1) = 0.618735
   -0.0... = (-0.5,0) = -0.396591
   0.0... = (0,0.5) = 0.20362
   0.0... = (0,0.5) = 0.375662
   -1.111... = (-2,-1.875) = -1.88295
   -1.10... = (-1.75,-1.5) = -1.68088
   -0.... = (-1,0) = -0.577547
   -0.... = (-1,0) = -0.890553</pre></div><p> First number is in binary with ... indicating an infinite sequence of random bits. Second number gives the corresponding interval. Third number is the result of filling in the missing bits and rounding exactly to the nearest representable double.</p>
<p>This class uses some mutable <a class="el" href="class_random_lib_1_1_random_number.html" title="Infinite precision random numbers.">RandomNumber</a> objects. So a single <a class="el" href="class_random_lib_1_1_exact_normal.html" title="Sample exactly from a normal distribution.">ExactNormal</a> object cannot safely be used by multiple threads. In a multi-processing environment, each thread should use a thread-specific <a class="el" href="class_random_lib_1_1_exact_normal.html" title="Sample exactly from a normal distribution.">ExactNormal</a> object. In addition, these should be invoked with thread-specific random generator objects.</p>
<dl class=""><dt><b>Template Parameters:</b></dt><dd>
  <table class="">
    <tr><td class="paramname">bits</td><td>the number of bits in each digit. </td></tr>
  </table>
  </dd>
</dl>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a5a1758f9cbe26c7bb29d3f5168060fe0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int bits = 1&gt; </div>
<div class="memtemplate">
template&lt;class Random &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">static bool <a class="el" href="class_random_lib_1_1_exact_normal.html">RandomLib::ExactNormal</a>&lt; bits &gt;::<a class="el" href="class_random_lib_1_1_exact_normal.html#a5a1758f9cbe26c7bb29d3f5168060fe0">Boolean</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td><code> [inline, static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return true with probability 1/2. This is similar to r.Boolean() but forces all the random results to come thru <a class="el" href="class_random_lib_1_1_random_number.html#a342e2c67c5826ee7d1ec4ce2fe6b0b2e">RandomNumber::RandomDigit</a>. </p>

</div>
</div>
<a class="anchor" id="a8cd3cd60140009d90017d25c7ac10741"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int bits = 1&gt; </div>
<div class="memtemplate">
template&lt;class Random &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="class_random_lib_1_1_exact_normal.html">RandomLib::ExactNormal</a>&lt; bits &gt;::<a class="el" href="class_random_lib_1_1_exact_normal.html#a8cd3cd60140009d90017d25c7ac10741">Choose</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implement outcomes for choosing with prob (<em>x</em> + 2<em>k</em>) / (2<em>k</em> + 2); return:</p>
<ul>
<li>1 (succeed unconditionally) with prob (2<em>k</em>) / (2<em>k</em> + 2),</li>
<li>0 (succeed with probability x) with prob 1 / (2<em>k</em> + 2),</li>
<li>1 (fail unconditionally) with prob 1 / (2<em>k</em> + 2).</li>
</ul>
<p>This simulates </p>
<div class="fragment"><pre class="fragment">     <span class="keywordtype">double</span> x = r.<a class="code" href="class_random_lib_1_1_random_canonical.html#ac98f47c83f6237339f0c161b047b3da1">Fixed</a>();  <span class="comment">// Uniform in [0,1)</span>
     x *= (2 * <a class="code" href="k__fold__simple__splitter__unittest_8cc.html#aeac95f79b72f13ef3244522682ba9a21">k</a> + 2);
     <span class="keywordflow">return</span> x &lt; 2 * <a class="code" href="k__fold__simple__splitter__unittest_8cc.html#aeac95f79b72f13ef3244522682ba9a21">k</a> ? 1 : (x &lt; 2 * <a class="code" href="k__fold__simple__splitter__unittest_8cc.html#aeac95f79b72f13ef3244522682ba9a21">k</a> + 1 ? 0 : -1);
</pre></div> 
</div>
</div>
<a class="anchor" id="aa9406b2d46a9862e3070e777bad5608b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int bits&gt; </div>
<div class="memtemplate">
template&lt;class Random &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_random_lib_1_1_exact_normal.html">RandomLib::ExactNormal</a>&lt; bits &gt;::<a class="el" href="class_random_lib_1_1_exact_normal.html#aa9406b2d46a9862e3070e777bad5608b">ExpProb</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return true with probability exp(<em>n</em>/2). For <em>bits</em> = 1, this consumes, on average, <em>t</em> (1exp(<em>n</em>/2))/(1exp(1/2)) random digits. A true result uses <em>n</em> <em>b</em> random digits. A false result uses <em>a</em> + <em>b</em> [exp(1/2)/(1exp(1/2))  <em>n</em> exp(<em>n</em>/2)/(1exp(<em>n</em>/2))] random digits. </p>

</div>
</div>
<a class="anchor" id="aa0d29f59d5343ab8467252903a615548"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int bits&gt; </div>
<div class="memtemplate">
template&lt;class Random &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_random_lib_1_1_exact_normal.html">RandomLib::ExactNormal</a>&lt; bits &gt;::<a class="el" href="class_random_lib_1_1_exact_normal.html#aa0d29f59d5343ab8467252903a615548">ExpProbH</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return true with probability exp(1/2). For <em>bits</em> = 1, this consumes, on average, <em>t</em> = 2.846 random digits. We have <em>t</em> = <em>a</em> (1exp(1/2)) + <em>b</em> exp(1/2), where <em>a</em> is the mean bit count for false result = 3.786 and <em>b</em> is the mean bit count for true result = 2.236. </p>

</div>
</div>
<a class="anchor" id="ae18d363792f71fee6526c51f99f24430"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int bits&gt; </div>
<div class="memtemplate">
template&lt;class Random &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="class_random_lib_1_1_exact_normal.html">RandomLib::ExactNormal</a>&lt; bits &gt;::<a class="el" href="class_random_lib_1_1_exact_normal.html#ae18d363792f71fee6526c51f99f24430">ExpProbN</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return <em>n</em> with probability exp(<em>n</em>/2) (1exp(1/2)). For <em>bits</em> = 1, this consumes <em>n</em> <em>a</em> + <em>b</em> random digits if the result is <em>n</em>. Averaging over <em>n</em> this becomes (<em>b</em>  (<em>b</em>  <em>a</em>) exp(1/2))/(1  exp(1/2)) digits. </p>

</div>
</div>
<a class="anchor" id="a41d3d7058bda37b72366ac8330136ad3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int bits&gt; </div>
<div class="memtemplate">
template&lt;class Random &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_random_lib_1_1_random_number.html">RandomNumber</a>&lt; bits &gt; <a class="el" href="class_random_lib_1_1_exact_normal.html">RandomLib::ExactNormal</a>&lt; bits &gt;::operator() </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_random_lib_1_1_random_canonical.html">Random</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a random deviate with a normal distribution of mean 0 and variance 1.</p>
<dl class=""><dt><b>Template Parameters:</b></dt><dd>
  <table class="">
    <tr><td class="paramname">Random</td><td>the type of the random generator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">r</td><td>a random generator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>the random sample. </dd></dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a90676ae87589bdbd0e1677facb493e4f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int bits = 1&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_random_lib_1_1_random_number.html">RandomNumber</a>&lt;bits&gt; <a class="el" href="class_random_lib_1_1_exact_normal.html">RandomLib::ExactNormal</a>&lt; bits &gt;::<a class="el" href="class_random_lib_1_1_exact_normal.html#a90676ae87589bdbd0e1677facb493e4f">_p</a><code> [mutable, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa4a41f853db3d9399090c01f97a49bb7"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int bits = 1&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_random_lib_1_1_random_number.html">RandomNumber</a>&lt;bits&gt; <a class="el" href="class_random_lib_1_1_exact_normal.html">RandomLib::ExactNormal</a>&lt; bits &gt;::<a class="el" href="class_random_lib_1_1_exact_normal.html#aa4a41f853db3d9399090c01f97a49bb7">_q</a><code> [mutable, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a129d9ff3cd3a2d3f6185940a9775096d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int bits = 1&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_random_lib_1_1_random_number.html">RandomNumber</a>&lt;bits&gt; <a class="el" href="class_random_lib_1_1_exact_normal.html">RandomLib::ExactNormal</a>&lt; bits &gt;::<a class="el" href="class_random_lib_1_1_exact_normal.html#a129d9ff3cd3a2d3f6185940a9775096d">_x</a><code> [mutable, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ltr/utility/random/<a class="el" href="_exact_normal_8hpp_source.html">ExactNormal.hpp</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 24 2013 18:17:12 for Learning To Rank Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
