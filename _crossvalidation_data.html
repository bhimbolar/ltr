<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Learning To Rank Library: Tutorial page 2 - Testing of algorithms</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Learning To Rank Library
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial page 2 - Testing of algorithms </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#CrossvalidationDataTest">Testing</a></li>
<li class="level1"><a href="#CrossvalidationDataTestCrossvalidation">Cross-validation</a><ul><li class="level2"><a href="#CrossvalidationDataTestCrossvalidationKFold">K-fold cross-validation</a></li>
<li class="level2"><a href="#CrossvalidationDataTestCrossvalidationTKFold">TK-fold cross-validation</a></li>
<li class="level2"><a href="#CrossvalidationDataTestCrossvalidationLeaveOneOut">Leave One Out cross-validation</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h2><a class="anchor" id="CrossvalidationDataTest"></a>
Testing</h2>
<p>There are two approaches in the testing of algorithms. First approach needs two datasets. <a class="el" href="class_the.html">The</a> first dataset is training and the second is testing. Algorithm is learnt with the first dataset. And after the learning the algorithm is ought to be tested with the second dataset. But this approach needs a lot of data and usually there is a small amount of available data. So in machine learning more often used second approach that called cross-validation. Cross-validation is a technique for assessing how the results of a statistical analysis will generalize to an independent data set. One round of cross-validation involves partitioning a sample of data into complementary subsets, performing the analysis on one subset (called the training set), and validating the analysis on the other subset (called the validation set or testing set). To reduce variability, multiple rounds of cross-validation are performed using different partitions, and the validation results are averaged over the rounds.</p>
<h2><a class="anchor" id="CrossvalidationDataTestCrossvalidation"></a>
Cross-validation</h2>
<p>LTR library supports cross-validaion technique that was described in the beginning of this page.</p>
<p>Validate is the main function that performs crossvalidation. It recieves four parameters: </p>
<ul>
<li>data_set - data set to run crossvalidation on </li>
<li>measures - measures, wich values will be calculated for every split </li>
<li>learner - learner used to produce scorers on train data </li>
<li>splitter - splitter used to split dataset into train + test sets</li>
</ul>
<p>Function Validate returns ValidationResult with information about all splits performed. ValidationResult is the class that holds scorer with it's learner's report and array of measure values on some test data. <br/>
 You can operate with ValidationResult using next functions: </p>
<ul>
<li>addSplitInfo(Scorer::Ptr, const string&amp;, const vector&lt;double&gt;&amp;) - Adds information about one split - resulted scorer, learner's report and values of measures </li>
<li>getSplitCount() - Returns number of splits, about which holds information ValidationResult </li>
<li>getScorer(int) - Gets scorer by split index </li>
<li>getReport(int) - Gets report by split index </li>
<li>getMeasureValues(int) - Gets measure values by split index </li>
<li>getMeasureNames() - Gets names (aliases) of measures, which values are held in ValidationResult</li>
</ul>
<p>Now let's take a closer look at parameters that function Validate recieves:</p>
<p>data_set is <a class="el" href="classltr_1_1_data_set.html">DataSet</a> class variable. <a class="el" href="classltr_1_1_data_set.html">DataSet</a> is class that contains list of all members.</p>
<p>Measuers is a vector of <a class="el" href="classltr_1_1_measure.html#a6a7879699e2e550f40ecae5cb3f1397d">Measure&lt;TElement&gt;::Ptr</a> elements. (<a class="el" href="classltr_1_1_measure.html#a6a7879699e2e550f40ecae5cb3f1397d">Measure&lt;TElement&gt;::Ptr</a> is a shared pointer).</p>
<p>learner is a shared pointer to some learner implemented in LTR.</p>
<p>More information about <a class="el" href="classltr_1_1_data_set.html">DataSet</a>, <a class="el" href="classltr_1_1_measure.html">Measure</a> and <a class="el" href="classltr_1_1_learner.html" title="Learns input dataset and produces a Scorer.">Learner</a> classes you can find in another chapters of LTR tutorial. [insert link to this chapter]</p>
<p>splitter is shared pointer to splitter implemented in LTR.</p>
<p>Every particular splitter corresponds to a particular kind of cross-validation. <br/>
 There are 3 different splitters implemented in LTR:</p>
<h3><a class="anchor" id="CrossvalidationDataTestCrossvalidationKFold"></a>
K-fold cross-validation</h3>
<p>In k-fold cross-validation, the original sample is randomly partitioned into k subsamples. Of the k subsamples, a single subsample is retained as the validation data for testing the model, and the remaining k - 1 subsamples are used as training data. <a class="el" href="class_the.html">The</a> cross-validation process is then repeated k times (the folds), with each of the k subsamples used exactly once as the validation data. <a class="el" href="class_the.html">The</a> k results from the folds then can be averaged (or otherwise combined) to produce a single estimation. <a class="el" href="class_the.html">The</a> advantage of this method over repeated random sub-sampling is that all observations are used for both training and validation, and each observation is used for validation exactly once.</p>
<h3><a class="anchor" id="CrossvalidationDataTestCrossvalidationTKFold"></a>
TK-fold cross-validation</h3>
<p>TK-fold cross-validation is an approach similar to K-fold cross-validation. <a class="el" href="class_the.html">The</a> only difference between K-fold and TK-fold that TK-fold repeats K-fold cross-validation procedure T times with the random subsets.</p>
<h3><a class="anchor" id="CrossvalidationDataTestCrossvalidationLeaveOneOut"></a>
Leave One Out cross-validation</h3>
<p>As the name suggests, leave-one-out cross-validation involves using a single observation from the original sample as the validation data, and the remaining observations as the training data. This is repeated such that each observation in the sample is used once as the validation data. This is the same as a K-fold cross-validation with K being equal to the number of observations in the original sample. Leave-one-out cross-validation is computationally expensive because it requires many repetitions of training.</p>
<p>Here is an example how to use Validate function with the Leave One Out cross-validation: </p>
<table  class="example">
<tr>
<td>Here is an example how to use Validate function with the Leave One Out cross-validation:  </td></tr>
<tr>
<td><div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;vector&gt;</span>

<span class="preprocessor">#include &quot;<a class="code" href="crossvalidation_8h.html">ltr/crossvalidation/crossvalidation.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="leave__one__out__splitter_8h.html">ltr/crossvalidation/leave_one_out_splitter.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="validation__result_8h.html">ltr/crossvalidation/validation_result.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="object_8h.html">ltr/data/object.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="feature__info_8h.html">ltr/data/feature_info.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="best__feature__learner_8h.html">ltr/learners/best_feature_learner/best_feature_learner.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="abs__error_8h.html">ltr/measures/abs_error.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="measure_8h.html">ltr/measures/measure.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="fake__scorer_8h.html">ltr/scorers/fake_scorer.h</a>&quot;</span>

<span class="keyword">using</span> std::cout;
<span class="keyword">using</span> std::endl;
<span class="keyword">using</span> std::vector;

<span class="keyword">using</span> <a class="code" href="classltr_1_1_abs_error.html">ltr::AbsError</a>;
<span class="keyword">using</span> <a class="code" href="classltr_1_1_best_feature_learner.html">ltr::BestFeatureLearner</a>;
<span class="keyword">using</span> <a class="code" href="classltr_1_1cv_1_1_leave_one_out_splitter.html">ltr::cv::LeaveOneOutSplitter</a>;
<span class="keyword">using</span> <a class="code" href="namespaceltr_1_1cv.html#a0884926302a39d700d8a74527332514d">ltr::cv::Validate</a>;
<span class="keyword">using</span> <a class="code" href="classltr_1_1cv_1_1_validation_result.html">ltr::cv::ValidationResult</a>;
<span class="keyword">using</span> <a class="code" href="classltr_1_1_feature_info.html">ltr::FeatureInfo</a>;
<span class="keyword">using</span> <a class="code" href="classltr_1_1_fake_scorer.html">ltr::FakeScorer</a>;
<span class="keyword">using</span> <a class="code" href="classltr_1_1_object.html">ltr::Object</a>;
<span class="keyword">using</span> <a class="code" href="namespaceltr.html#a8aaa4b82ec8ae13fd6ef68babbb54472">ltr::PointwiseMeasure</a>;

<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="crossvalidation__unittest_8cc.html#a13d63c6937c4a8ba114ad02595b8544b">data_length</a> = 5;
<span class="keyword">const</span> FeatureInfo fi(3);

<span class="keywordtype">int</span> <a class="code" href="generator_8cc.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>() {
  ltr::Log log;

  DataSet&lt;Object&gt; data(fi);
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="crossvalidation__unittest_8cc.html#a13d63c6937c4a8ba114ad02595b8544b">data_length</a>; ++i) {
    Object object;
    <span class="keywordtype">object</span> &lt;&lt; 0.7 * i + 0.3 &lt;&lt; 0.2 * i * i * i - 0.8 &lt;&lt; i * i * 2.7 - 3.4 * i;
    data.add(<span class="keywordtype">object</span>);
  }
  <a class="code" href="classltr_1_1_fake_scorer.html#a11a35ae014b5d3986aab80654147e5a3">FakeScorer::Ptr</a> fscorer(<span class="keyword">new</span> FakeScorer());
  fscorer-&gt;predict(data);

  <a class="code" href="classltr_1_1_measure.html#a6a7879699e2e550f40ecae5cb3f1397d">AbsError::Ptr</a> ab_measure(<span class="keyword">new</span> AbsError);
  BestFeatureLearner&lt;Object&gt;::Ptr bfl(
    <span class="keyword">new</span> BestFeatureLearner&lt;Object&gt;(ab_measure));

  vector&lt;PointwiseMeasure::Ptr&gt; abm_vector;
  abm_vector.push_back(ab_measure);

  LeaveOneOutSplitter&lt;Object&gt;::Ptr spl(<span class="keyword">new</span> LeaveOneOutSplitter&lt;Object&gt;);

  ValidationResult vr = <a class="code" href="namespaceltr_1_1cv.html#a0884926302a39d700d8a74527332514d">Validate</a>(data, abm_vector, bfl, spl);

  cout &lt;&lt; vr.getSplitCount() &lt;&lt; endl;
  cout &lt;&lt; vr.getMeasureValues(0).size() &lt;&lt; endl;
  cout &lt;&lt; vr.getMeasureNames().size() &lt;&lt; endl;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> measure_index = 0;
       measure_index &lt; vr.getMeasureNames().size();
       ++measure_index) {
     cout &lt;&lt; vr.getMeasureNames()[measure_index] &lt;&lt; endl;
  }

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceltr_1_1decision__tree.html#ae6513cc56bdc318c6385005cb105678b">split</a> = 0; <a class="code" href="namespaceltr_1_1decision__tree.html#ae6513cc56bdc318c6385005cb105678b">split</a> &lt; vr.getSplitCount(); ++<a class="code" href="namespaceltr_1_1decision__tree.html#ae6513cc56bdc318c6385005cb105678b">split</a>) {
    Object test_object;
    test_object &lt;&lt; 1;
    cout &lt;&lt; vr.getScorer(<a class="code" href="namespaceltr_1_1decision__tree.html#ae6513cc56bdc318c6385005cb105678b">split</a>)-&gt;score(test_object) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>
         &lt;&lt; vr.getMeasureValues(<a class="code" href="namespaceltr_1_1decision__tree.html#ae6513cc56bdc318c6385005cb105678b">split</a>).at(0) &lt;&lt; endl;
  }
};
</pre></div>  </td></tr>
<tr>
<td>Output: </td></tr>
<tr>
<td><div class="fragment"><pre class="fragment"></pre></div>  </td></tr>
</table>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Wed Sep 5 2012 13:02:25 for Learning To Rank Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
